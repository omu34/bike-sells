<!doctype html>
<html lang="{{ request.locale.iso_code }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>{{ page_title }}</title>
    {{ content_for_header }}

    <!-- Custom Font (Bell MT) -->
    <link rel="preload" href="{{ 'bell-mt.woff2' | asset_url }}" as="font" type="font/woff2" crossorigin>
    <style>
      @font-face {
        font-family: 'Bell MT';
        src: url('{{ 'bell-mt.woff2' | asset_url }}') format('woff2'),
             url('{{ 'bell-mt.ttf' | asset_url }}') format('truetype');
        font-weight: normal;
        font-style: normal;
        font-display: swap;
      }

      body {
        font-family: 'Bell MT', serif;
      }
    </style>

    <!-- Vite Dev or Build -->
    {% if shop.metafields.dev.vite_dev_mode == 'true' %}
      <!-- ✅ Vite Dev Server -->
      <script type="module" src="http://localhost:5173/@vite/client"></script>
      <script type="module" src="http://localhost:5173/assets/main.js"></script>
    {% else %}
      <!-- ✅ Production Assets -->
      <link rel="stylesheet" href="{{ 'main.css' | asset_url }}">
      <script type="module" src="{{ 'main.js' | asset_url }}"></script>
    {% endif %}
  </head>

  <body class="{{ scheme_classes | prepend: 'body ' }}">
    <style>
      {% for scheme in settings.color_schemes %}
        {% assign background = scheme.settings.background %}
        {% assign brightness = background | color_brightness %}

        {% if brightness <= 26 %}
          {% assign contrast = background | color_lighten: 50 %}
        {% elsif brightness <= 65 %}
          {% assign contrast = background | color_lighten: 5 %}
        {% else %}
          {% assign contrast = background | color_darken: 25 %}
        {% endif %}

        :root[data-color-scheme="{{ scheme.name | handle }}"] {
          --color-foreground: {{ scheme.settings.text.red }}, {{ scheme.settings.text.green }}, {{ scheme.settings.text.blue }};
          --color-background: {{ background.red }}, {{ background.green }}, {{ background.blue }};
          --color-background-contrast: {{ contrast.red }}, {{ contrast.green }}, {{ contrast.blue }};
          --color-shadow: {{ scheme.settings.shadow.red }}, {{ scheme.settings.shadow.green }}, {{ scheme.settings.shadow.blue }};
          --color-button: {{ scheme.settings.button.red }}, {{ scheme.settings.button.green }}, {{ scheme.settings.button.blue }};
          --color-button-text: {{ scheme.settings.button_label.red }}, {{ scheme.settings.button_label.green }}, {{ scheme.settings.button_label.blue }};
          --color-secondary-button: {{ background.red }}, {{ background.green }}, {{ background.blue }};
          --color-secondary-button-text: {{ scheme.settings.secondary_button_label.red }}, {{ scheme.settings.secondary_button_label.green }}, {{ scheme.settings.secondary_button_label.blue }};
          --color-link: {{ scheme.settings.secondary_button_label.red }}, {{ scheme.settings.secondary_button_label.green }}, {{ scheme.settings.secondary_button_label.blue }};
          --color-badge-foreground: {{ scheme.settings.text.red }}, {{ scheme.settings.text.green }}, {{ scheme.settings.text.blue }};
          --color-badge-background: {{ background.red }}, {{ background.green }}, {{ background.blue }};
          --color-badge-border: {{ scheme.settings.text.red }}, {{ scheme.settings.text.green }}, {{ scheme.settings.text.blue }};
        }
      {% endfor %}
    </style>

    <main id="MainContent">
      {{ content_for_layout }}
    </main>

    {{ content_for_footer }}
  </body>
</html>







